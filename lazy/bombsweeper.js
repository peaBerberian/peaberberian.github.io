/** This is the code for the app identified as "bombsweeper". */
var N="\u2B1B",I="\u{1F6A9}",k="\u{1F4A3}",T="\u{1F4A5}",W=["\u2B1C","1\uFE0F\u20E3","2\uFE0F\u20E3","3\uFE0F\u20E3","4\uFE0F\u20E3","5\uFE0F\u20E3","6\uFE0F\u20E3","7\uFE0F\u20E3","8\uFE0F\u20E3"];function D(R,s){let r=document.createElement("div");c(r,{backgroundColor:s.STYLE.barBg,color:s.STYLE.textColor,padding:"5px",display:"flex",flexDirection:"column",overflow:"auto",height:"100%",width:"100%",alignItems:"center",gap:"20px"});let u=!1,_=!0,m=0,p=0,M=document.createElement("h1");M.textContent="\u{1F4A3} BombSweeper!",c(M,{marginTop:"15px",color:s.STYLE.primaryColor}),r.appendChild(M);let g=document.createElement("div");c(g,{display:"flex"});let B=document.createElement("div"),S=document.createElement("span");S.textContent="Unflagged bombs: ";let E=document.createElement("span");c(E,{fontWeight:"bold"}),E.textContent=15,B.appendChild(S),B.appendChild(E),g.appendChild(B),r.appendChild(g);let O=document.createElement("div");c(O,{color:s.STYLE.textColor}),r.appendChild(O);let f=document.createElement("button");f.textContent="Reset!",f.className="btn",f.onclick=U,r.appendChild(f);let C=document.createElement("div");return c(C,{display:"inline-grid",gridTemplateColumns:"repeat(10, 36px)",gridTemplateRows:"repeat(10, 36px)",gap:"2px",margin:"0 auto",border:"6px solid "+s.STYLE.lineColor,borderCollapse:"collapse",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}),r.appendChild(C),U(),{element:r};function F(t,a){let e=0;for(let n=Math.max(0,t-1);n<=Math.min(9,t+1);n++)for(let o=Math.max(0,a-1);o<=Math.min(9,a+1);o++)n===t&&o===a||i(n,o).dataset.bomb==="true"&&e++;return e}function v(t,a){let e=0;for(let n=Math.max(0,t-1);n<=Math.min(9,t+1);n++)for(let o=Math.max(0,a-1);o<=Math.min(9,a+1);o++)n===t&&o===a||i(n,o).dataset.flagged==="true"&&e++;return e}function i(t,a){return r.querySelector(`[data-row="${t}"][data-col="${a}"]`)}function w(t){if(!(u||t.dataset.revealed==="true")){if(t.dataset.flagged==="true")t.dataset.flagged="false",t.textContent=N,m--;else{if(m>=15)return;t.dataset.flagged="true",t.textContent=I,m++}E.textContent=15-m,h()}}function b(t){if(t.dataset.revealed==="true"||t.dataset.flagged==="true")return;t.dataset.revealed="true",t.style.cursor="auto",p++;let a=parseInt(t.dataset.row),e=parseInt(t.dataset.col);if(t.dataset.bomb==="true"){t.textContent=T,L(!1);return}let n=parseInt(t.dataset.neighbors);if(t.textContent=W[n],n===0)for(let o=Math.max(0,a-1);o<=Math.min(9,a+1);o++)for(let l=Math.max(0,e-1);l<=Math.min(9,e+1);l++){if(o===a&&l===e)continue;let d=i(o,l);d.dataset.revealed==="false"&&b(d)}}function y(t){if(u||t.dataset.revealed!=="true")return;let a=parseInt(t.dataset.row),e=parseInt(t.dataset.col),n=parseInt(t.dataset.neighbors);if(v(a,e)===n){for(let l=Math.max(0,a-1);l<=Math.min(9,a+1);l++)for(let d=Math.max(0,e-1);d<=Math.min(9,e+1);d++){if(l===a&&d===e)continue;let x=i(l,d);x.dataset.revealed==="false"&&x.dataset.flagged==="false"&&b(x)}h()}}function h(){p===85&&L(!0)}function L(t){u=!0,r.querySelectorAll('[data-bomb="true"]').forEach(a=>{a.dataset.revealed!=="true"&&(a.textContent=k)}),t?O.textContent="You live another day, congratulation! \u{1F44F}\u{1F44F}\u{1F44F}":O.textContent="\u{1F4A5} BOOOOOOOM, you're dead! \u{1F4A5}",f.textContent="Restart!"}function U(){u=!1,_=!0,m=0,p=0,E.textContent=15,O.textContent="Left click to reveal, right click to flag",f.textContent="Generate new grid",C.innerHTML="";for(let t=0;t<10;t++)for(let a=0;a<10;a++){let e=document.createElement("div");e.dataset.row=t,e.dataset.col=a,e.dataset.revealed="false",e.dataset.flagged="false",e.dataset.bomb="false",e.dataset.neighbors="0",c(e,{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",cursor:"pointer",border:"6px solid "+s.STYLE.lineColor}),e.textContent=N,e.addEventListener("click",()=>{if(u||e.dataset.revealed==="true"||e.dataset.flagged==="true")return;let n=parseInt(e.dataset.row),o=parseInt(e.dataset.col);_&&(_=!1,A(n,o)),b(e),h()}),e.addEventListener("contextmenu",n=>{n.preventDefault(),w(e)}),e.addEventListener("mousedown",n=>{n.button===1&&(n.preventDefault(),y(e))}),e.addEventListener("auxclick",n=>{n.button===1&&n.preventDefault()}),C.appendChild(e)}}function A(t,a){let e=0;for(;e<15;){let n=Math.floor(Math.random()*10),o=Math.floor(Math.random()*10);n===t&&o===a||i(n,o).dataset.bomb==="true"||(i(n,o).dataset.bomb="true",e++)}for(let n=0;n<10;n++)for(let o=0;o<10;o++){let l=i(n,o);if(l.dataset.bomb!=="true"){let d=F(n,o);l.dataset.neighbors=d}}}}function c(R,s){for(let r of Object.keys(s))R.style[r]=s[r]}export{D as create};
