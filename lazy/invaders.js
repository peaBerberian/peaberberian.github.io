/** This is the code for the app identified as "invaders". */
var K=["a","arrowleft"],j=["d","arrowright"],ne='<svg height="800px" width="800px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.001 512.001" xml:space="preserve"><path style="fill:#FF4D30;" d="M136.662,416.962c23.923,41.064,68.391,68.68,119.338,68.68c50.946,0,95.415-27.616,119.338-68.68  H136.662z"/><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M155.029,416.962h-18.366  c23.923,41.064,68.391,68.68,119.338,68.68c3.086,0,6.147-0.106,9.183-0.306C218.109,482.242,177.502,455.538,155.029,416.962z"/><path style="fill:#3A5D74;" d="M33.661,366.715v30.119c0,11.74,9.519,21.259,21.26,21.259h402.159  c11.741,0,21.26-9.519,21.26-21.259v-30.119H33.661"/><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M52.027,396.834v-30.119H33.661v30.119  c0,11.74,9.519,21.259,21.26,21.259h18.366C61.546,418.092,52.027,408.573,52.027,396.834z"/><path style="fill:#CAE9F7;" d="M256,147.32c-4.681,0-8.477-3.794-8.477-8.477V76.03c0-4.681,3.795-8.477,8.477-8.477  s8.477,3.795,8.477,8.477v62.813C264.477,143.524,260.681,147.32,256,147.32z"/><path style="fill:#90C8EC;" d="M105.744,264.112h300.512c-12.958-71.24-75.278-125.269-150.256-125.269  C181.021,138.843,118.701,192.872,105.744,264.112z"/><path style="fill:#3A5D74;" d="M333.362,264.112v-31.061c0-11.742-9.519-21.261-21.26-21.261H199.9  c-11.744,0-21.261,9.519-21.261,21.261v31.061H333.362z"/><circle style="fill:#FF4D30;" cx="256" cy="57.068" r="30.709"/><g><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M265.183,139.123c-3.039-0.18-6.099-0.28-9.183-0.28   c-74.979,0-137.299,54.029-150.256,125.269h18.366C136.536,195.802,194.346,143.327,265.183,139.123z"/><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M218.267,211.79H199.9c-11.744,0-21.261,9.519-21.261,21.261   v31.061h18.366v-31.061C197.007,221.309,206.524,211.79,218.267,211.79z"/><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M243.655,57.068c0-13.76,9.054-25.404,21.528-29.308   c-2.9-0.909-5.985-1.398-9.183-1.398c-16.958,0-30.711,13.748-30.711,30.706c0,16.963,13.753,30.709,30.711,30.709   c3.199,0,6.283-0.491,9.183-1.398C252.71,82.476,243.655,70.831,243.655,57.068z"/></g><path style="fill:#578CAD;" d="M382.844,368.975h107.897c11.741,0,21.26-9.519,21.26-21.259v-17.598  c0-37.704-30.564-68.267-68.267-68.267H68.266C30.564,261.852,0,292.415,0,330.118v17.598c0,11.74,9.519,21.259,21.259,21.259  H382.844"/><path style="opacity:0.1;fill:#231F20;enable-background:new    ;" d="M18.366,347.716v-17.598  c0-37.704,30.564-68.267,68.266-68.267H68.266C30.564,261.852,0,292.415,0,330.118v17.598c0,11.74,9.519,21.259,21.259,21.259  h18.366C27.885,368.975,18.366,359.456,18.366,347.716z"/><path style="fill:#FF9737;" d="M449.107,323.889H62.892c-4.681,0-8.477-3.794-8.477-8.477c0-4.683,3.795-8.477,8.477-8.477h386.215  c4.683,0,8.477,3.794,8.477,8.477C457.584,320.094,453.789,323.889,449.107,323.889z"/></svg>',re='<svg height="800px" width="800px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve"><g><path style="fill:#40C7A9;" d="M24,2.5C12.127,2.5,0,17.75,0,30.937c0,1.37,1.027,2.563,2.397,2.563h2.665   c0.072-0.379,0.158-0.76,0.277-1.145c0.416-1.346,1.461-2.47,2.837-2.775c1.041-0.231,2.236-0.031,3.057,1.534   c0.389,0.74,0.452,1.61,0.211,2.386h25.113c-0.241-0.776-0.178-1.646,0.211-2.386c0.822-1.565,2.017-1.765,3.057-1.534   c1.376,0.306,2.421,1.429,2.837,2.775c0.119,0.384,0.204,0.765,0.277,1.145h2.797C47.06,33.5,48,32.375,48,31.049   C48,18.667,35.909,2.5,24,2.5z"/><path style="fill:#C1F4E8;" d="M14.229,30.5c-0.095-0.267-0.209-0.528-0.341-0.78c-1.073-2.046-2.902-3.22-5.019-3.22   c-0.44,0-0.893,0.051-1.346,0.151c-1.918,0.426-3.557,1.727-4.509,3.513C3.482,18.471,14.399,5.5,24,5.5   c9.853,0,20.387,14.161,20.975,24.645c-0.953-1.776-2.587-3.069-4.5-3.494C40.022,26.551,39.57,26.5,39.13,26.5   c-2.116,0-3.945,1.174-5.019,3.221c-0.133,0.251-0.246,0.512-0.341,0.779H14.229z"/><path style="fill:#d16544;" d="M9,45.5c0,0-5.798-6.231-3.662-13.145c0.416-1.347,1.461-2.47,2.837-2.775   c1.041-0.231,2.236-0.031,3.057,1.534c0.615,1.172,0.419,2.669-0.517,3.605C8.676,36.759,9,40.5,9,45.5z"/><path style="fill:#d16544;" d="M21,33.5c-2.844,1.781-3,10-3,10c-4.313-4.25-3-10-3-10H21z"/><path style="fill:#d16544;" d="M39,45.5c0,0,5.798-6.231,3.662-13.145c-0.416-1.347-1.461-2.47-2.837-2.775   c-1.041-0.231-2.236-0.031-3.057,1.534c-0.615,1.172-0.419,2.669,0.517,3.605C39.324,36.759,39,40.5,39,45.5z"/><path style="fill:#d16544;" d="M27,33.5c2.844,1.781,3,10,3,10c4.313-4.25,3-10,3-10H27z"/><ellipse style="fill:#E64C3C;" cx="24" cy="12" rx="5" ry="5.5"/><ellipse style="fill:#E64C3C;" cx="31" cy="24" rx="5" ry="5.5"/><ellipse style="fill:#E64C3C;" cx="17" cy="24" rx="5" ry="5.5"/><path style="fill:#C03A2B;" d="M28.993,11.845C28.994,11.897,29,11.948,29,12c0,3.038-2.239,5.5-5,5.5s-5-2.462-5-5.5   c0-0.052,0.006-0.103,0.007-0.155C16.592,13.28,15,15.724,15,18.5c0,0.151,0.016,0.298,0.025,0.447   C15.631,18.66,16.298,18.5,17,18.5c2.761,0,5,2.462,5,5.5c0,0.782-0.151,1.525-0.419,2.199C22.352,26.39,23.161,26.5,24,26.5   s1.648-0.11,2.419-0.301C26.151,25.525,26,24.782,26,24c0-3.038,2.239-5.5,5-5.5c0.702,0,1.369,0.16,1.975,0.447   C32.984,18.798,33,18.651,33,18.5C33,15.724,31.408,13.28,28.993,11.845z"/></g></svg>',ae='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 484.8 484.8" xml:space="preserve"><g><path style="fill:#109DA0;" d="M484.8,286.4c0,104-95.2,188-242.4,188S0,390.4,0,286.4s95.2-260,242.4-260S484.8,182.4,484.8,286.4   z"/><path style="fill:#109DA0;" d="M484.8,286.4c0,104-95.2,156-242.4,156S0,390.4,0,286.4s95.2-276,242.4-276S484.8,182.4,484.8,286.4   z"/></g><g><path style="fill:#19BCA4;" d="M242.4,10.4c147.2,0,242.4,172,242.4,276s-95.2,156-242.4,156"/><path style="fill:#19BCA4;" d="M484.8,286.4c0,104-95.2,156-242.4,156S0,390.4,0,286.4s95.2-260,242.4-260S484.8,182.4,484.8,286.4   z"/></g><path style="fill:#28DDBF;" d="M0,286.4c0-104,95.2-260,242.4-260"/><path style="fill:#109DA0;" d="M242.4,26.4c147.2,0,242.4,156,242.4,260s-95.2,188-242.4,188"/><path style="fill:#0C838C;" d="M242.4,26.4c147.2,0,242.4,156,242.4,260"/><path style="fill:#28DDBF;" d="M205.6,283.2c0,10.4-30.4,14.4-68.8,14.4c-37.6,0-68.8-4-68.8-14.4S98.4,264,136.8,264  C175.2,264,205.6,272.8,205.6,283.2z"/><path style="fill:#19BCA4;" d="M416.8,283.2c0,10.4-30.4,14.4-68.8,14.4c-37.6,0-68.8-4-68.8-14.4S309.6,264,348,264  C385.6,264,416.8,272.8,416.8,283.2z"/><g><circle style="fill:#109DA0;" cx="68.8" cy="262.4" r="4.8"/><circle style="fill:#109DA0;" cx="32.8" cy="278.4" r="8.8"/><circle style="fill:#109DA0;" cx="56.8" cy="246.4" r="1.6"/><circle style="fill:#109DA0;" cx="93.6" cy="260.8" r="1.6"/></g><g><circle style="fill:#19BCA4;" cx="407.2" cy="264.8" r="6.4"/><circle style="fill:#19BCA4;" cx="427.2" cy="276" r="1.6"/><circle style="fill:#19BCA4;" cx="438.4" cy="299.2" r="4.8"/><circle style="fill:#19BCA4;" cx="440.8" cy="246.4" r="4.8"/></g><g><circle style="fill:#109DA0;" cx="60.8" cy="294.4" r="4"/><circle style="fill:#109DA0;" cx="67.2" cy="227.2" r="3.2"/></g><g><circle style="fill:#19BCA4;" cx="24.8" cy="116.8" r="8.8"/><circle style="fill:#19BCA4;" cx="50.4" cy="88.8" r="4.8"/></g><circle style="fill:#109DA0;" cx="460" cy="136" r="1.6"/><g><circle style="fill:#19BCA4;" cx="453.6" cy="112.8" r="6.4"/><path style="fill:#19BCA4;" d="M478.4,116.8c0,2.4-1.6,4-4,4s-4-1.6-4-4c0-2.4,1.6-4,4-4C476,112.8,478.4,115.2,478.4,116.8z"/></g><g><circle style="fill:#109DA0;" cx="34.4" cy="140.8" r="4.8"/><path style="fill:#109DA0;" d="M301.6,304.8c0,20.8-26.4,64.8-59.2,64.8s-59.2-44-59.2-64.8"/></g><path style="fill:#02243E;" d="M266.4,330.4h-48c-4.8,0-8-3.2-8-8s3.2-8,8-8h48c4.8,0,8,3.2,8,8S271.2,330.4,266.4,330.4z"/><path style="fill:#109DA0;" d="M205.6,258.4c-16.8,24-57.6,24.8-92,0.8c-34.4-23.2-48.8-62.4-32.8-86.4c16.8-24,57.6-24.8,92.8-0.8  C207.2,195.2,221.6,234.4,205.6,258.4z"/><path style="fill:#1E4784;" d="M213.6,245.6c-16.8,24-57.6,24.8-92.8,0.8C86.4,223.2,72,184,88,160c16.8-24,57.6-24.8,92-0.8  C216,183.2,230.4,221.6,213.6,245.6z"/><path style="fill:#00233F;" d="M181.6,159.2c34.4,23.2,48.8,62.4,32.8,86.4c-16.8,24-57.6,24.8-92.8,0.8"/><path style="fill:#19BCA4;" d="M279.2,258.4c16.8,24,57.6,24.8,92,0.8c34.4-23.2,48.8-62.4,32.8-86.4c-16.8-24-57.6-24.8-92.8-0.8  C277.6,195.2,263.2,234.4,279.2,258.4z"/><path style="fill:#1E4784;" d="M271.2,245.6c16.8,24,57.6,24.8,92.8,0.8c34.4-23.2,48.8-62.4,32.8-86.4c-16.8-24-57.6-24.8-92.8-0.8  S254.4,221.6,271.2,245.6z"/><path style="fill:#00233F;" d="M303.2,159.2c-34.4,23.2-48.8,62.4-32.8,86.4c16.8,24,57.6,24.8,92.8,0.8"/><g><rect x="220.017" y="90.87" transform="matrix(-0.7072 -0.707 0.707 -0.7072 333.3726 363.8002)" style="fill:#28DDBF;" width="44" height="44"/><circle style="fill:#28DDBF;" cx="242.4" cy="349.6" r="7.2"/><circle style="fill:#28DDBF;" cx="242.4" cy="382.4" r="7.2"/><circle style="fill:#28DDBF;" cx="242.4" cy="414.4" r="7.2"/></g></svg>',ce="\u{1F404}",oe='<svg stroke-width="5px" stroke="#000000" height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 509 509" xml:space="preserve"><g><polygon style="fill:#DEDEDF;" points="238.6,400.5 157.7,450.1 157.7,477.3 254.5,454.7 254.5,413.8  "/><polygon style="fill:#DEDEDF;" points="270.4,400.5 351.3,450.1 351.3,477.3 254.5,454.7 254.5,413.8  "/></g><g><path style="fill:#F1F3F7;" d="M186.3,214.8h-19.9c-2.3,0-4.2-1.9-4.2-4.2v-44.1h28.3v44.1C190.5,212.9,188.6,214.8,186.3,214.8z"/><path style="fill:#F1F3F7;" d="M125.2,251.5h-19.9c-2.3,0-4.2-1.9-4.2-4.2v-44.1h28.3v44.1C129.4,249.6,127.6,251.5,125.2,251.5z"/><path style="fill:#F1F3F7;" d="M322.7,214.8h19.9c2.3,0,4.2-1.9,4.2-4.2v-44.1h-28.3v44.1C318.5,212.9,320.4,214.8,322.7,214.8z"/><path style="fill:#F1F3F7;" d="M383.8,251.5h19.9c2.3,0,4.2-1.9,4.2-4.2v-44.1h-28.3v44.1C379.6,249.6,381.4,251.5,383.8,251.5z"/></g><g><polygon style="fill:#DEDEDF;" points="226.5,162.1 43.9,287.5 43.9,320.3 232.3,276  "/><polygon style="fill:#DEDEDF;" points="282.5,162.1 465.1,287.5 465.1,320.3 276.7,276  "/></g><path style="fill:#F1F3F7;" d="M254.5,11.4c-22.3,0-35.2,62.6-35.2,62.6s0,215.2,0,247.8c0,91.1,26.1,132.9,35.2,132.9  c9.5,0,35.2-43.1,35.2-132.9c0-32.6,0-247.8,0-247.8S276.8,11.4,254.5,11.4z"/><path style="fill:#6EB1E1;" d="M254.5,60.3c11.9,0,22.3,4.9,28.6,12.3c-1.4-14.5-13.7-25.9-28.6-25.9s-27.2,11.4-28.6,25.9  C232.2,65.2,242.6,60.3,254.5,60.3z"/><path style="fill:#BDBDBE;" d="M254.5,369.1c-3.4,0-6.1,2.7-6.1,6.1v90.7c0,3.4,2.7,6.1,6.1,6.1c3.4,0,6.1-2.7,6.1-6.1v-90.7  C260.6,371.9,257.9,369.1,254.5,369.1z"/></svg>',pe='<svg fill="#ff4444" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800px" height="800px" viewBox="0 0 29.529 29.53" xml:space="preserve"><g><g><path d="M14.077,13.43c-0.557,0.018-0.848,0.5-0.802,1.109c0.046,0.614,0.376,1.022,0.873,1.007c0.5-0.014,0.791-0.466,0.8-1.077    C14.954,13.906,14.646,13.414,14.077,13.43z"/><path d="M10.437,13.833c-0.553,0.106-0.764,0.629-0.622,1.223c0.142,0.599,0.536,0.949,1.025,0.854    c0.491-0.093,0.71-0.584,0.62-1.188C11.381,14.163,10.997,13.726,10.437,13.833z"/><path d="M7.413,15.94C7.329,15.971,7.245,16,7.162,16.033c0.103,0.276,0.206,0.552,0.309,0.83    c0.072-0.019,0.158-0.048,0.279-0.093c0.322-0.113,0.57-0.32,0.47-0.637C8.125,15.833,7.785,15.807,7.413,15.94z"/><path d="M29.529,16.508l-3.768-2.394l3.197-1.867L25.604,11.4l0.453-3.007l-4.062,1.903l-1.318-3.135l-2.285,2.976l-2.458-5.477    L14.069,9.89l-3.505-3.083L9.706,8.221l0.106,2.934L8.999,9.387L8.4,10.371L3.182,8.394l1.552,3.916L0,13.343l4.977,2.31    L1.939,18.19l3.069,0.387l-1.825,3.322l4.598-2.495l2.131,5.465l0.92-2.132l0.049-3.053l0.925,1.922l0.606-1.186l1.703,3.866    l0.587-3.522l2.866,3.426l1.294-4.163l1.038,0.562l0.363-1.051l1.342,1.971l1.418,0.764l0.611-2.844l3.373,2.024l-2.502-3.457    L29.529,16.508z M8.852,16.665c-0.178,0.244-0.522,0.454-1.131,0.678c-0.339,0.125-0.601,0.207-0.76,0.248    c-0.395-0.951-0.786-1.9-1.182-2.852c0.191-0.121,0.605-0.316,1.004-0.459c0.489-0.174,0.805-0.23,1.104-0.182    c0.283,0.035,0.52,0.19,0.596,0.463c0.078,0.271-0.028,0.569-0.367,0.813c0.001,0.002,0.002,0.006,0.002,0.01    c0.417-0.029,0.771,0.153,0.88,0.545C9.077,16.203,9.002,16.454,8.852,16.665z M10.907,16.471    c-0.923,0.182-1.648-0.336-1.895-1.199c-0.257-0.902,0.245-1.786,1.338-1.998c1.141-0.213,1.841,0.456,1.93,1.312    C12.384,15.615,11.823,16.295,10.907,16.471z M14.128,16.111c-0.941,0.032-1.57-0.595-1.676-1.486    c-0.109-0.932,0.521-1.724,1.63-1.758c1.152-0.03,1.738,0.739,1.69,1.601C15.714,15.499,15.053,16.081,14.128,16.111z     M18.749,16.438c0.063-0.396,0.124-0.793,0.185-1.189c0.057-0.374,0.129-0.825,0.215-1.275c-0.004,0-0.008-0.001-0.014-0.002    c-0.188,0.372-0.412,0.785-0.605,1.125c-0.209,0.377-0.407,0.76-0.602,1.144c-0.188-0.029-0.375-0.056-0.563-0.08    c-0.063-0.417-0.131-0.833-0.208-1.25c-0.071-0.378-0.145-0.835-0.189-1.252c-0.007,0-0.009,0-0.012,0    c-0.061,0.42-0.124,0.9-0.186,1.289c-0.055,0.396-0.11,0.788-0.166,1.183c-0.223-0.02-0.447-0.035-0.67-0.049    c0.127-1.042,0.264-2.082,0.413-3.122c0.371,0.024,0.742,0.058,1.112,0.1c0.08,0.361,0.155,0.723,0.228,1.084    c0.062,0.375,0.115,0.778,0.138,1.153c0.005,0,0.009,0,0.015,0.002c0.146-0.347,0.325-0.74,0.494-1.066    c0.18-0.323,0.366-0.645,0.557-0.964c0.36,0.063,0.721,0.135,1.078,0.216c-0.164,1.036-0.338,2.072-0.519,3.105    C19.217,16.535,18.982,16.483,18.749,16.438z M20.146,16.819c-0.238-0.064-0.367-0.284-0.309-0.523    c0.062-0.244,0.285-0.377,0.54-0.307c0.257,0.07,0.382,0.292,0.308,0.538C20.614,16.762,20.395,16.887,20.146,16.819z     M21.182,17.131c-0.237-0.076-0.354-0.303-0.283-0.539c0.074-0.242,0.306-0.361,0.56-0.277c0.253,0.084,0.362,0.312,0.276,0.553    C21.651,17.1,21.428,17.213,21.182,17.131z M22.738,17.258c-0.094,0.225-0.316,0.327-0.561,0.23    c-0.244-0.094-0.345-0.323-0.262-0.553c0.084-0.23,0.319-0.334,0.568-0.237C22.736,16.797,22.828,17.028,22.738,17.258z     M22.84,16.588c-0.18-0.072-0.361-0.144-0.541-0.209c0.209-0.675,0.416-1.348,0.619-2.023c0.277,0.102,0.555,0.21,0.83,0.324    C23.443,15.313,23.141,15.951,22.84,16.588z"/><path d="M7.726,14.887c-0.073-0.226-0.315-0.281-0.669-0.156c-0.171,0.062-0.265,0.107-0.328,0.141    c0.085,0.227,0.171,0.456,0.256,0.686c0.082-0.031,0.165-0.062,0.249-0.092C7.63,15.324,7.797,15.11,7.726,14.887z"/></g></g></svg>',q=document.createElement("style");q.textContent=`
@keyframes circle {
  0%   { transform: translate(5px, 0px); }
  25%  { transform: translate(0px, -5px); }
  50%  { transform: translate(-5px, 0px); }
  75%  { transform: translate(0px, 5px); }
  100% { transform: translate(5px, 0px); }
}
@keyframes upDown {
  0%   { transform: translate(0px, -5px); }
  100% { transform: translate(0px, 5px); }
}
@keyframes swing {
  0% {
    transform: rotate(-15deg);
  }
  100% {
    transform: rotate(15deg);
  }
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
`;document.head.appendChild(q);function he(M,d){let a=document.createElement("div");c(a,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",backgroundColor:d.STYLE.windowActiveHeader,position:"relative",overflow:"hidden",fontFamily:"monospace",cursor:"crosshair"});let o=document.createElement("div");c(o,{position:"relative",overflow:"visible"}),a.appendChild(o);let E;{let t=document.createElement("span");t.innerHTML=oe,E=t.childNodes[0]}let b;{let t=document.createElement("span");t.innerHTML=pe,b=t.childNodes[0]}let A={ufo:F(ne),alien1:F(re),alien2:F(ae)},e,D,B={},v=null,T=!1,s={};L();let S=document.createElement("div");c(S,{position:"absolute",top:"10px",left:"10px",color:d.STYLE.windowActiveHeaderText,fontSize:Math.max(12,e.gameWidth*.025)+"px",zIndex:"1000",fontWeight:"bold"}),o.appendChild(S);let w=document.createElement("div");c(E,{position:"absolute",top:0,color:d.STYLE.windowActiveHeaderText,width:(s.playerSize??0)+"px",height:(s.playerSize??0)+"px"}),w.appendChild(E),c(w,{position:"absolute",width:s.playerSize+"px",height:s.playerSize+"px",zIndex:"10",userSelect:"none"}),o.appendChild(w);let u=document.createElement("div");c(u,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:d.STYLE.windowActiveHeader,color:d.STYLE.windowActiveHeaderText,border:"1px solid #fff",fontSize:"24px",textAlign:"center",display:"none",zIndex:"1001",padding:"20px",borderRadius:"10px"}),u.innerHTML='GAME OVER<br><span style="font-size: 16px;">Press R or Click to restart</span>',u.innerHTML=`Invaders!<br><span style="font-size: ${s.hudSize}px;">Press Space or Click to Start</span>`,o.appendChild(u);let C=document.createElement("div");return c(C,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:d.STYLE.windowActiveHeader,color:d.STYLE.windowActiveHeaderText,border:"1px solid #fff",fontSize:"24px",textAlign:"center",display:"none",zIndex:"1001",padding:"20px",borderRadius:"10px"}),C.innerHTML='GAME OVER<br><span style="font-size: 16px;">Press R or Click to restart</span>',o.appendChild(C),H(),{element:a,onActivate:ie,onDeactivate:se};function L(){O(),R(),I(),Y(),e={player:{x:0,y:0,width:0,height:0,lives:3,lastDamageTs:-1/0},bullets:[],enemies:[],enemyBullets:[],shields:[],score:0,started:!1,gameOver:!1,lastShot:0,alienDirection:1,ufoDirection:1,gameWidth:0,gameHeight:0,level:1},a.offsetWidth>0&&a.offsetHeight>0&&W()}function W(){e.gameWidth=a.offsetWidth,e.gameHeight=a.offsetHeight,o.style.height=a.offsetHeight+"px",o.style.width=a.offsetWidth+"px",s={playerSpeed:.008*e.gameWidth,bulletSpeed:.015*e.gameHeight,enemyBulletSpeed:.005*e.gameHeight,enemyBaseSpeed:.002*e.gameWidth,enemySuppSpeed:0,enemyDropDistance:.05*e.gameHeight,fireRate:200,playerSize:Math.max(20,.04*e.gameWidth),enemySize:Math.max(16,.035*e.gameWidth),bulletSize:Math.max(20,.008*e.gameWidth),playerBulletSize:Math.max(7,.008*e.gameWidth),hudSize:Math.max(12,.025*e.gameWidth),shieldSize:Math.max(50,.06*e.gameWidth)},c(E,{width:s.playerSize+"px",height:s.playerSize+"px"}),c(b,{position:"absolute",top:0,width:s.playerSize*2+"px",height:s.playerSize*2+"px",transform:`translate(-${s.playerSize/2}px, -${s.playerSize/2}px)`}),e.player.width=s.playerSize,e.player.height=s.playerSize,e.player.x=(e.gameWidth-e.player.width)/2,e.player.y=e.gameHeight-e.player.height-20,G(),J()}function O(){if(e?.enemies){for(let t=e.enemies.length-1;t>=0;t--)e.enemies[t].element.remove();e.enemies=[]}}function R(){if(e?.shields){for(let t=e.shields.length-1;t>=0;t--)e.shields[t].element.remove();e.shields=[]}}function I(){if(e?.bullets){for(let t=e.bullets.length-1;t>=0;t--)e.bullets[t].element.remove();e.bullets=[]}}function Y(){if(e?.enemyBullets){for(let t=e.enemyBullets.length-1;t>=0;t--)e.enemyBullets[t].element.remove();e.enemyBullets=[]}}function G(){O();let t,l;switch(e.level){case 1:t=3,l=8;break;default:t=4,l=8;break}let i=s.enemySize||25,n=i*1.4,r=l*n,h=(e.gameWidth-r)/2,z=e.gameHeight*.1;for(let f=0;f<t;f++)for(let x=0;x<l;x++){let y=f===t-1,m={row:f,col:x,isUfo:y,speed:s.enemyBaseSpeed*(y?2:1),x:h+x*n,y:z+f*n,width:i,height:i},p=document.createElement("div");p.dataset.type="enemy";let g;y?g=A.ufo.cloneNode():f===t-2?g=A.alien2.cloneNode():g=A.alien1.cloneNode(),c(g,{height:i+"px",width:i+"px"}),p.appendChild(g),c(p,{position:"absolute",left:m.x+"px",top:m.y+"px",fontSize:s.enemySize+"px",userSelect:"none"}),f===2?(p.style.animation="swing 2s ease-in-out infinite alternate",p.transformOrigin="top center"):f===3?p.style.animation="circle 3s infinite linear":p.style.animation="upDown 2s infinite alternate",o.appendChild(p),m.element=p,e.enemies.push(m)}}function J(){R();for(let h=o.children.length-1;h>=0;h--){let z=o.children[h];z.dataset.type==="shield"&&o.removeChild(z)}let t=4,l=s.shieldSize||40,i=t*l*2,n=(e.gameWidth-i)/4,r=e.gameHeight*.75;for(let h=0;h<t;h++){let z=n+h*(l*4),f=[[1,1,1,1,1],[1,1,1,1,1],[1,1,0,1,1],[1,0,0,0,1]],x=l/6;for(let y=0;y<f.length;y++)for(let m=0;m<f[y].length;m++)if(f[y][m]===1){let p={row:y,col:m,x:z+m*x,y:r+y*x,width:x,height:x},g=document.createElement("div");g.dataset.type="shield",c(g,{position:"absolute",left:p.x+"px",top:p.y+"px",height:p.height+"px",width:p.width+"px",opacity:"0.7",background:`linear-gradient(to top left, ${d.STYLE.windowActiveHeaderText}, #ccc 99%)`,userSelect:"none"}),o.appendChild(g),p.element=g,e.shields.push(p)}}}function U(){if(!e.started||e.gameOver)return;let t=performance.now();if(t-e.lastShot>s.fireRate){let l=s.playerBulletSize,i={x:e.player.x+e.player.width/2-l/2,y:e.player.y,width:l,height:l},n=document.createElement("div");n.dataset.type="bullet",c(n,{position:"absolute",left:i.x+"px",top:i.y+"px",width:i.width+"px",height:i.height+"px",fontSize:s.playerBulletSize+"px",borderRadius:s.playerBulletSize+"px",backgroundColor:d.STYLE.windowActiveHeaderText,userSelect:"none"}),o.appendChild(n),i.element=n,e.bullets.push(i),e.lastShot=t}}function Q(){if(K.some(t=>B[t])&&(e.player.x=Math.max(0,e.player.x-s.playerSpeed)),j.some(t=>B[t])&&(e.player.x=Math.min(e.gameWidth-e.player.width,e.player.x+s.playerSpeed)),v!==null){let t=v-e.player.width/2,l=t-e.player.x,i=Math.min(Math.abs(l),s.playerSpeed*2);Math.abs(l)>2?e.player.x+=l>0?i:-i:e.player.x=t}}function Z(){e.bullets=e.bullets.filter(t=>(t.y-=s.bulletSpeed,t.y<=-t.height?(t.element.remove(),!1):!0)),e.enemyBullets=e.enemyBullets.filter(t=>(t.y+=s.enemyBulletSpeed,t.y>=e.height+t.height?(t.element.remove(),!1):!0))}function ee(){if(e.enemies.length===0){e.level++,Y(),I(),G(),s.enemyBaseSpeed+=.3,s.enemySuppSpeed=0;return}let t=!1,l=!1;for(let i of e.enemies){let n=i.isUfo?e.ufoDirection:e.alienDirection;(i.x<=0&&n===-1||i.x>=e.gameWidth-i.width&&n===1)&&(i.isUfo?l=!0:t=!0)}if(t?(e.alienDirection*=-1,e.enemies.forEach(i=>{i.isUfo||(i.y+=s.enemyDropDistance)})):e.enemies.forEach(i=>{i.isUfo||(i.x+=(i.speed+s.enemySuppSpeed)*e.alienDirection)}),l?(e.ufoDirection*=-1,e.enemies.forEach(i=>{i.isUfo&&(i.y+=s.enemyDropDistance)})):e.enemies.forEach(i=>{i.isUfo&&(i.x+=(i.speed+s.enemySuppSpeed)*e.ufoDirection)}),Math.random()<(.001+Math.max(e.level-2,0)*.001)*e.enemies.length){let i=e.enemies[Math.floor(Math.random()*e.enemies.length)],n=s.bulletSize,r={x:i.x+i.width/2-n/2,y:i.y+i.height,width:n,height:n},h=document.createElement("div");h.dataset.type="enemy-bullet",h.textContent=ce,c(h,{position:"absolute",left:r.x+"px",top:r.y+"px",fontSize:s.bulletSize+"px",width:r.width+"px",height:r.height+"px",transformOrigin:"center center",animation:"spin 3s infinite linear",userSelect:"none"}),o.appendChild(h),r.element=h,e.enemyBullets.push(r)}}function te(){for(let t=e.bullets.length-1;t>=0;t--){let l=e.bullets[t],i=!1;for(let n=e.enemies.length-1;n>=0;n--){let r=e.enemies[n];if(l.x<r.x+r.width&&l.x+l.width>r.x&&l.y<r.y+r.height&&l.y+l.height>r.y){e.bullets[t].element.remove(),e.bullets.splice(t,1),e.enemies[n].element.remove(),e.enemies.splice(n,1),s.enemySuppSpeed+=15e-5*e.gameWidth,e.score+=10,i=!0;break}}if(!i)for(let n=e.shields.length-1;n>=0;n--){let r=e.shields[n];if(l.x<r.x+r.width&&l.x+l.width>r.x&&l.y<r.y+r.height&&l.y+l.height>r.y){e.bullets[t].element.remove(),e.bullets.splice(t,1),e.shields[n].element.remove(),e.shields.splice(n,1);break}}}for(let t=e.enemyBullets.length-1;t>=0;t--){let l=e.enemyBullets[t],i=!1;if(l.x<e.player.x+e.player.width&&l.x+l.width>e.player.x&&l.y<e.player.y+e.player.height&&l.y+l.height>e.player.y&&performance.now()-e.player.lastDamageTs>600&&(e.enemyBullets[t].element.remove(),e.enemyBullets.splice(t,1),e.player.lives--,e.player.lastDamageTs=performance.now(),e.player.lives<=0&&(e.gameOver=!0),i=!0),!i)for(let n=e.shields.length-1;n>=0;n--){let r=e.shields[n];if(l.x<r.x+r.width&&l.x+l.width>r.x&&l.y<r.y+r.height&&l.y+l.height>r.y){e.enemyBullets[t].element.remove(),e.enemyBullets.splice(t,1),e.shields[n].element.remove(),e.shields.splice(n,1);break}}}for(let t of e.enemies)t.x<e.player.x+e.player.width&&t.x+t.width>e.player.x&&t.y<e.player.y+e.player.height&&t.y+t.height>e.player.y&&(e.gameOver=!0),t.y+t.height>=e.gameHeight-50&&(e.gameOver=!0)}function le(){c(w,{left:e.player.x+"px",top:e.player.y+"px"}),e.enemies.forEach(l=>{c(l.element,{left:l.x+"px",top:l.y+"px"})}),e.shields.forEach(l=>{c(l.element,{left:l.x+"px",top:l.y+"px"})}),e.bullets.forEach(l=>{c(l.element,{left:l.x+"px",top:l.y+"px"})}),e.enemyBullets.forEach(l=>{c(l.element,{left:l.x+"px",top:l.y+"px"})});let t=performance.now()-e.player.lastDamageTs;t<500?(w.innerHTML="",w.appendChild(b),b.style.transform=`scale(${Math.min(t/250,1)}) translate(0px, -${s.playerSize/2}px)`):e.gameOver||(w.innerHTML="",w.appendChild(E)),e.gameWidth===0||e.gameHeight===0?S.style.display="none":S.style.display==="none"&&(S.style.display="block"),S.textContent=`SCORE: ${e.score} | LIVES: ${e.player.lives} | LEVEL: ${e.level}`,S.style.fontSize=s.hudSize+"px",e.gameOver?(e.bullets.forEach(l=>{l.element.remove()}),e.bullets.length=0,e.enemyBullets.forEach(l=>{l.element.remove()}),e.enemyBullets.length=0,C.style.display="block",C.style.fontSize=s.hudSize*1.5+"px",C.innerHTML=`GAME OVER<br>FINAL SCORE: ${e.score}<br><span style="font-size: ${s.hudSize}px;">Press R or Click to restart</span>`):(e.started?u.style.display="none":(e.gameWidth===0||e.gameHeight===0?u.style.display="none":u.style.display="block",u.style.fontSize=s.hudSize*1.5+"px",u.innerHTML=`Invaders!<br><span style="font-size: ${s.hudSize}px;">Press Space or Click to Start</span>`),C.style.display="none")}function H(){e.started?e.gameWidth>a.offsetWidth||e.gameHeight>a.offsetHeight?L():e.gameOver||(Q(),Z(),ee(),te()):(e.gameWidth!==a.offsetWidth||e.gameHeight!==a.offsetHeight)&&W(),le(),D=requestAnimationFrame(H)}function V(){L()}function ie(){document.addEventListener("keydown",$),document.addEventListener("keyup",P),a.addEventListener("mousemove",k,{passive:!1}),a.addEventListener("touchmove",k,{passive:!1}),a.addEventListener("mousedown",_),a.addEventListener("mouseup",N),a.addEventListener("click",X),cancelAnimationFrame(D),H()}function se(){document.removeEventListener("keydown",$),document.removeEventListener("keyup",P),a.removeEventListener("mousemove",k),a.removeEventListener("touchmove",k),a.removeEventListener("mousedown",_),a.removeEventListener("mouseup",N),a.removeEventListener("click",X),cancelAnimationFrame(D),D=null}function $(t){let l=t.key.toLowerCase();B[l]=!0,(K.includes(l)||j.includes(l))&&(v=null),l===" "&&(t.preventDefault(),e.started?U():e.started=!0),l==="r"&&V()}function P(t){B[t.key.toLowerCase()]=!1}function k(t){if(!e.started||e.gameOver)return;let l;if(t.touches?.length){if(t.touches.length>1)return;l=t.touches[0].clientX}else l=t.clientX;let i=o.getBoundingClientRect();v=l-i.left,v<0&&(v=0),v>i.width&&(v=i.width)}function _(t){t.preventDefault(),T=!0,U()}function N(){T=!1}function X(){e.gameOver?(V(),e.started=!0):e.started||(e.started=!0)}}function F(M){let d=URL.createObjectURL(new Blob([M],{type:"image/svg+xml"})),a=new Image;return a.src=d,a}function c(M,d){for(let a of Object.keys(d))M.style[a]=d[a]}export{he as create};
