/** This is the code for the app identified as "settings". */
var _=["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"];function l(e){let t=Array.prototype.slice.call(e),n=Array.prototype.slice.call(arguments,1),a=S(t[0],0);if(t[0][a]!=="<")throw I(t,"set at the start"),new SyntaxError("str-html: No leading '<' character.");let o=Z(t,a,n);if(t.length>0&&(a=S(t[0],o.offset),t[0].length>a))throw new SyntaxError("str-html: Unexpected data after the parent element.");return o.element}function Z(e,t,n){let a=t+1,o=j(e[0],a);if(o===e[0].length)throw I(e,"in the tag's name"),new SyntaxError("str-html: Tag ended unexpectedly early.");if(o===a)throw I(e,"in the tag's name"),new SyntaxError("str-html: A tag has an empty name.");let f=e[0].substring(a,o),r;try{r=document.createElement(f)}catch(s){throw s instanceof DOMException&&s.name==="InvalidCharacterError"?new SyntaxError(`str-html: Invalid tag name: "${f}"`):s}a=o;let c=X(r,e,a,n);a=S(e[0],c.offset);let u=K(e,a);if(u>=0)return{element:r,offset:u};if(e.length===0||e[0][a]!==">")throw I(e,"in the tag's attribute names"),new SyntaxError("str-html: Unexpected end of opening tag.");if(a++,_.includes(f))return{element:r,offset:a};let d=a;for(;;)if(e[0][a]===void 0){let s=document.createTextNode(e[0].substring(d,a));for(r.appendChild(s);a>=e[0].length;){if(d=0,a=0,e.shift(),n.length>0){let i=n.shift();J(r,i)}if(e.length===0)return{element:r,offset:0}}}else if(e[0][a]==="<"){let s=document.createTextNode(e[0].substring(d,a));if(r.appendChild(s),e[0][a+1]!=="/"){let i=Z(e,a,n);if(a=i.offset,r.appendChild(i.element),d=a,e.length===0)throw new SyntaxError("str-html: Unexpected end of string.");a=S(e[0],i.offset)}else{let i=!0,p=j(e[0],a+2),b=e[0].substring(a+2,p);if(b!==f)if(_.includes(b))i=!1;else throw new SyntaxError("str-html: Closing tag does not correspond to last opened tag.");if(a=S(e[0],p),e[0][a]!==">")throw I(e,"in an element's closing tag"),new SyntaxError("str-html: Malformed closing tag.");if(a++,i)return{element:r,offset:a};d=a}}else a++}function J(e,t){if(t!=null)if(t instanceof HTMLElement)e.appendChild(t);else if(Array.isArray(t))for(let n of t)J(e,n);else{let n=document.createTextNode(t.toString());e.appendChild(n)}}function X(e,t,n,a){let o=n;for(;;){if(o=S(t[0],o),t[0][o]===void 0)throw I(t,"set as an attribute name"),new SyntaxError("str-html: Reached end while parsing tag attributes.");if(t[0][o]===">")return{offset:o};if(K(t,o)!==-1)return{offset:o};let r=te(t,a,o);o=r.offset;let[c,u]=r.attribute;try{e.setAttribute(c,u)}catch(d){throw d instanceof DOMException&&d.name==="InvalidCharacterError"?new SyntaxError(`str-html: Invalid attribute name: "${c}"`):d}}}function Y(e,t,n){let a=n,o=n,f="",r=e[0];for(;;)if(r[o]!==">"&&r[o]!=="/"&&r[o]!==" "&&!R(r[o]))if(r[o]!==void 0)o++;else{if(f+=r.substring(a),t.length>0&&(f+=D(t.shift())),e.shift(),e.length===0)return{offset:o,value:f};r=e[0],o=0,a=0}else return f+=r.substring(a,o),{offset:o,value:f}}function R(e){return e===" "||e==="	"||e==="\f"||e==="\r"||e===`
`}function D(e){if(e===null)return"";if(e===void 0)return"";if(e instanceof HTMLElement)throw new SyntaxError("str-html: Found HTMLElement set as attribute's value.");if(Array.isArray(e)){let t="";for(let n of e)t+=D(n);return t}else return e.toString()}function ee(e,t,n){let a=n,o=n,f="",r=e[0];for(;;)if(r[o]!=='"')if(r[o]!==void 0)o++;else{if(f+=r.substring(a),t.length>0&&(f+=D(t.shift())),e.shift(),e.length===0)return{offset:o,value:f};r=e[0],o=0,a=0}else return f+=r.substring(a,o),o++,{offset:o,value:f}}function te(e,t,n){let a=n,o=ae(e[0],n),f=e[0].substring(a,o);if(o=S(e[0],o),e[0][o]!=="=")return{offset:o,attribute:[f,""]};o++,o=S(e[0],o);let r=e[0][o]!=='"'?Y(e,t,o):ee(e,t,o+1);if(e.length===0)throw new SyntaxError(`str-html: Unexpected end of HTML inside of value for attribute "${f}".`);return{offset:r.offset,attribute:[f,r.value]}}function ae(e,t){for(let n=t;n<e.length;n++){let a=e[n];if(a===" "||a==="="||a===">"||a==="\\"||a==="\r"||a===`
`||a==="	"||a==="\f")return n}return e.length}function j(e,t){for(let n=t;n<e.length;n++){let a=e[n];if(a===">"||a==="/"||R(a))return n}return e.length}function K(e,t){let n=e[0];if(n[t]!=="/")return-1;if(n[t+1]!==">")throw I(e,"at the end of a tag"),new SyntaxError("str-html: Invalid tag end.");return t+2}function S(e,t){let n=t,a;do a=e[n];while(R(a)&&++n);return n}function I(e,t){if(e.length>1)throw new SyntaxError("str-html: Expression must only be set for attribute values or an element's inner content."+(t!==void 0?` Found one ${t}.`:""))}function E(e,t,n){let a=l`<span />`,o=t!=null?l`<span>${t}</span>`:null;o&&N(o,{backgroundColor:"#00000054",color:"#fff",padding:"5px",top:"0px",left:"0px",position:"absolute"});let f=l`<div class="w-color-item">${o}</div>`;f.style.display="inline-block";let r=l`<input class="w-shadow-color-input" type="color" value="${e.getValue()}" />`;return e.onUpdate(c=>{r.value=c,f.style.backgroundColor=r.value},{clearSignal:n}),f.style.backgroundColor=r.value,f.onclick=()=>r.click(),f.tabIndex="0",f.onkeydown=c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),f.click())},r.onclick=function(c){e.setValueIfChanged(c.target.value)},r.oninput=function(c){e.setValueIfChanged(c.target.value)},a.appendChild(f),a.appendChild(r),a}function g({label:e,ref:t,min:n,max:a,valueToText:o},f){let r=l`<div class="w-slider-container">`,c=l`<div class="w-slider-with-value" />`,u=l`<label>${e}</label>`,d=t.getValue(),s=l`<input type="range" class="w-slider" min="${n}" max="${a}" value="${d}">`,i=l`<span class="w-slider-value">${o(d)}</span>`,p=()=>{i.textContent=o(s.value),t.setValueIfChanged(+s.value)};return t.onUpdate(b=>{s.value=b,i.textContent=o(b)},{clearSignal:f}),s.oninput=p,s.onchange=p,c.appendChild(s),c.appendChild(i),r.appendChild(u),r.appendChild(c),r}function C({ref:e,label:t},n){let a=l`<input type="checkbox" checked="">`;a.checked=e.getValue();let o=l`<div class="w-small-opt">
<span class="w-small-opt-desc">${t}</span>
<label class="w-switch">
  ${a}
  <span class="w-switch-slider"></span>
</label>
</div>`;return a.onchange=function(){e.setValueIfChanged(a.checked)},e.onUpdate(f=>{a.checked=f},{clearSignal:n}),o}function T({ref:e,options:t,toRef:n=r=>r,fromRef:a=r=>r,label:o},f){let r=l`<select class="w-select">
${t.map(u=>l`<option value="${u}">${u}</option>`)}
</select>`;r.value=a(e.getValue());let c=l`<div class="w-small-opt">
<label>${o}</label>
${r}
</div>`;return r.oninput=r.onchange=function(){e.setValueIfChanged(n(r.value))},e.onUpdate(u=>{r.value=a(u)},{clearSignal:f}),c}function N(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}function $({settings:e,appUtils:t},n,a){let{createAppTitle:o}=t,f=l`<div>${o("Taskbar",{})}</div>`;f.dataset.section="taskbar";let r=l`<div class="w-group"><h3>General settings</h3></div>`;r.appendChild(T({ref:e.taskbarLocation,options:["bottom","top","left","right"],label:"Location of the taskbar"},a)),r.appendChild(C({ref:e.taskbarDisplayTitle,label:"Show applications titles"},a)),r.appendChild(s(e,n,a)),r.appendChild(g({ref:e.taskbarTaskMargin,label:"Space between Tasks",min:0,max:20,valueToText:i=>String(i)+"px"},a)),f.appendChild(r);let c=l`<div class="w-group"><h3>Start menu</h3></div>`;c.appendChild(oe(e)),c.appendChild(C({ref:e.enableStartMenuSublists,label:"Enable sub-categories in start menu"},a)),f.appendChild(c);let u=l`<div class="w-group"><h3>Taskbar manual updates</h3></div>`;u.appendChild(C({ref:e.allowManualTaskbarResize,label:"Enable resizing the taskbar from its edge"},a)),u.appendChild(C({ref:e.allowManualTaskbarMove,label:"Enable moving the taskbar by selecting it"},a)),f.appendChild(u);let d=l`<div class="w-group"><h3>Colors</h3></div>`;return d.appendChild(g({ref:e.taskbarOpacity,label:"Taskbar Opacity",min:0,max:100,valueToText:i=>String(i)+"%"},a)),d.appendChild(g({ref:e.taskbarActiveAppOpacity,label:"Taskbar Active App Opacity",min:0,max:100,valueToText:i=>String(i)+"%"},a)),[["Taskbar Background",e.taskbarBgColor],["Taskbar Hover",e.taskbarHoverColor],["Taskbar Text",e.taskbarTextColor],["Taskbar Active App Background",e.taskbarActiveBgColor],["Taskbar Inactive App Background",e.taskbarInactiveBgColor],["Start Menu Background",e.startMenuBgColor],["Start Menu Text",e.startMenuTextColor],["Start Menu Selected Item",e.startMenuActiveBgColor],["Start Menu Icon Background",e.startMenuIconBgColor]].forEach(([i,p])=>{d.appendChild(E(p,i,a))}),f.appendChild(d),f;function s(i,p,b){let k=document.createElement("span");return i.taskbarLocation.onUpdate(v=>{let h=["top","bottom"].includes(v);k.innerHTML="",k.appendChild(g({ref:i.taskbarSize,label:"Taskbar size",min:h?p.minHorizontalSize:p.minVerticalSize,max:h?p.maxHorizontalSize:p.maxVerticalSize,valueToText:w=>String(w)},b))},{emitCurrentValue:!0,clearSignal:b}),k}}function oe(e){let t=document.createElement("div"),n=document.createElement("div");n.className="w-small-opt",n.innerHTML="<span>Start Menu Logo</span>";let a=document.createElement("label"),o=document.createElement("input");o.type="button",o.className="btn",o.value=e.startMenuPic.getValue(),a.appendChild(o),n.appendChild(a),t.appendChild(n);let f=document.createElement("div");f.className="w-char-picker";let r=document.createElement("div");return r.className="w-char-grid",f.appendChild(r),o.onclick=()=>{f.parentElement?d():u()},["\u{1F680}","\u{1F5A5}\uFE0F","\u{1F4BB}","\u{1F5B1}\uFE0F","\u{1F468}\u200D\u{1F4BB}","\u{1F469}\u200D\u{1F4BB}","\u{1F3C3}","\u{1F3C3}\u200D\u2640\uFE0F","\u{1F3AC}","\u{1F5FA}\uFE0F","\u{1F5C4}\uFE0F","\u{1F5C3}\uFE0F","\u{1F9F8}","\u{1F50E}","\u{1F9ED}","\u{1F3D6}\uFE0F","\u{1F389}","\u{1F355}","\u{1F436}","\u{1F431}","\u{1F984}","\u{1F422}","\u{1F981}","\u{1F43C}"].forEach(s=>{let i=document.createElement("span");i.className="w-char-picker-char",i.textContent=s,i.addEventListener("click",p=>{o.value=s,e.startMenuPic.setValueIfChanged(s),d(),p.stopPropagation(),p.preventDefault()}),i.tabIndex="0",i.onkeydown=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),i.click())},r.appendChild(i)}),t;function u(){t.appendChild(f)}function d(){try{t.removeChild(f)}catch{}}}var Q=["photo-1464822759023-fed622ff2c3b.jpg","beach1.avif","forest1.avif","some_ducks.avif","photo-1745761412274-5303bc3f2e45.jpg","photo-1479030160180-b1860951d696.jpg","dark_mountain.avif"],M=["linear-gradient(45deg, #12c2e9, #c471ed, #f64f59)","linear-gradient(to right, #2980b9, #6dd5fa, #ffffff)","linear-gradient(to right, #ff8177, #ff867a, #ff8c7f, #f99185, #cf556c)","linear-gradient(to right, #00b09b, #96c93d)","linear-gradient(to right, #434343, #000000)","linear-gradient(to right, #3a1c71, #d76d77, #ffaf7b)","linear-gradient(to bottom, #1e3c72, #2a5298, #7db9e8)","linear-gradient(to left, #0f2027, #203a43, #2c5364)","linear-gradient(135deg, #667eea, #764ba2)"];function O(e){let{settings:t}=e,{createAppTitle:n}=e.appUtils,a=l`<div>${n("Wallpaper",{})}</div>`;a.dataset.section="wallpaper";let o=[],f=t.desktopBackground.getValue(),r=l`<div class="w-group"><h3>Pre-selected Images</h3></div>`,c=!1;for(let m=0;m<Q.length;m++){let x=e.getImageRootPath()+Q[m],y=l`<img class="w-color-item selectable img-empty" src="${encodeURI(x)}" />`;y.onload=()=>{window.requestAnimationFrame(()=>{y.classList.remove("img-empty")})},f.type==="image"&&f.value===x&&(c=!0,y.classList.add("selected")),y.onclick=()=>{o.forEach(A=>{A.classList.remove("selected")}),y.classList.add("selected"),t.desktopBackground.setValue({type:"image",value:x})},y.tabIndex="0",y.onkeydown=A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),y.click())},o.push(y),r.appendChild(y)}a.appendChild(r);let u=f.type==="image"&&!c?f.value:"",d=l`<input type="text" class="text-input" value="${u}" placeholder="URL">`,s=l`<span class="spinner" style="position: relative; margin-left: -112px; margin-bottom: 35px; display:none" />`,i;d.oninput=()=>{s.style.display="inline-block",i&&(clearTimeout(i),i=void 0),i=setTimeout(()=>{p.src=d.value||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",p.classList.contains("selected")&&p.click()},1100)};let p=l`<img class="w-color-item img-empty selectable" src="${d.value||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"}" />`;p.onload=()=>{s.style.display="none"},p.onerror=()=>{s.style.display="none"},u&&p.classList.add("selected"),p.onclick=()=>{!d.value&&!p.classList.contains("selected")||(o.forEach(m=>{m.classList.remove("selected")}),p.classList.add("selected"),t.desktopBackground.setValue({type:"image",value:d.value}))},p.tabIndex="0",p.onkeydown=m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),p.click())},o.push(p);let b=l`<div class="w-group"><h3>Custom Image</h3>${[d,l`<span style="width: 230px">${[p,s]}</span>`]}</div>`;a.appendChild(b);let k=l`<div class="w-group" />`,v=l`<h3>Plain color</h3>`,h=l`<input type="color" value="#1e88e5" />`;h.style.visibility="hidden",h.style.height="0px";let w=l`<div class="w-color-item selectable" />`;w.style.background=h.value,w.onclick=()=>h.click(),w.tabIndex="0",w.onkeydown=m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),w.click())},h.onclick=function(){o.forEach(m=>{m.classList.remove("selected")}),w.classList.add("selected"),w.style.background=h.value,t.desktopBackground.setValue({type:"color",value:h.value})},h.oninput=function(m){w.style.background=h.value,t.desktopBackground.setValue({type:"color",value:m.target.value})},o.push(w),k.appendChild(v),k.appendChild(w),k.appendChild(h),a.appendChild(k);let B=l`<div class="w-group" />`,H=l`<h3>Or... Check those beautiful gradients</h3>`,L=l`<div class="w-grid" />`;for(let m=0;m<M.length;m++){let x=l`<div class="w-color-item selectable" />`;f.type==="color"&&f.value===M[m]&&x.classList.add("selected"),x.dataset.wallpaper=`gradient${m+1}`;let y=l`<div alt="Gradient ${m+1}" class="img-gradient${m+1}" />`;N(y,{background:M[m],height:"100%",width:"100%"}),x.appendChild(y),L.appendChild(x),o.push(x),x.onclick=function(){o.forEach(A=>A.classList.remove("selected")),x.classList.add("selected"),t.desktopBackground.setValue({type:"color",value:M[m]})},x.tabIndex="0",x.onkeydown=A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),x.click())}}return B.appendChild(H),B.appendChild(L),a.appendChild(B),a}function P(e,t){let{settings:n,appUtils:a}=e,{createAppTitle:o}=a,f=e.getVersion(),r=l`<div>${o("System",{})}</div>`;r.dataset.section="system";let c=l`<div class="w-group"><h3>General Settings</h3></div>`,u=g({ref:n.fontSize,label:"Font Size",min:10,max:19,valueToText:p=>{switch(+p){case 10:return"Extremely small";case 11:return"Minuscule";case 12:return"Very small";case 13:return"Small";case 14:return"Medium";case 15:return"Somewhat Large?";case 16:return"Large";case 17:return"Even Larger";case 18:return"Very Large";default:return"Extra Large"}}},t);u.classList.add("w-small-opt"),u.style.height="50px",c.appendChild(u),r.appendChild(c);let d=l`<div class="w-group"><h3>Technical Information</h3></div>`,s=l`<div class="w-small-opt"><div>Link to GitHub</div><div><a href="${e.CONSTANTS.PROJECT_REPO}" target="_blank">peaberberian.github.io</a></div>`;d.appendChild(s);let i=l`<div class="w-small-opt"><div>version</div><div>${f}</div></div>`;return d.appendChild(i),r.appendChild(d),r}var ne={light:["Colorful","#1a2e4b","#ffffff","#2196f3","#3498db","#263b59","#0f4774","#ffffff","#737373","#ffffff","#e0e0e0","#333333","#ffffff","#dddddd","#3498db","#efefef","#c8c8c8","#3498db","#ffffff","#000000","#f5f5f5","#e0e0e0","#dddddd","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],dark:["Colorful","#121212","#cccccc","#2c2c2c","#303030","#1a1a1a","#3b3b3b","#ffffff","#737373","#000000","#252525","#dddddd","#1e1e1e","#333333","#e00000","#2a2a2a","#363636","#4a4a4a","#ffffff","#dddddd","#1a1a1a","#303030","#252525","#ffffff","#eeeeee","#383838","#2c2c2c","#333333"],moon:["Colorful","#27334a","#f0f0f0","#2a5d8f","#36486d","#21304a","#41567c","#ffffff","#3d3d3d","#dfdfdf","#2a303e","#e6e6e6","#2b3342","#404755","#4a99d9","#4c5467","#3e4758","#3b6ea3","#ffffff","#e6e6e6","#2a3242","#36435a","#374256","#ffffff","#ffffff","#37415A","#37415A","#4B5F7D"],robot:["Sober","#1a1a1d","#8a8a8f","#2e2e33","#33333a","#232329","#27272c","#ffffff","#35353c","#65656d","#1f1f24","#b3b3b8","#19191d","#40404a","#039b31","#2b2b33","#2e2e36","#38383f","#ffffff","#b8b8bf","#222228","#2d2d36","#2a2a33","#ffffff","#ffffff","#323239","#27272e","#2c2c33"],otter:["Sober","#0d3a40","#ffffff","#3dd0d8","#1a7a7f","#1a4a4f","#0d5a62","#ffffff","#5a7a7f","#ffffff","#e0f5f5","#222222","#ffffff","#cce5e5","#2ab7c1","#f0fafa","#b3e5e5","#1a7a7f","#ffffff","#000000","#f0fafa","#cce5e5","#ddf0f0","#ffffff","#ffffff","#2ab7c1","#ffffff","#e0f5f5"],crystal:["Sober","#1e2a4a","#ffffff","#8a76dc","#8a76dc","#2d3b59","#4b3c82","#ffffff","#788697","#e8f0ff","#d9e3f1","#203354","#f0f8ff","#d7d1f0","#8a76dc","#e6f0fa","#d7d1f0","#8a76dc","#ffffff","#203354","#f0f8ff","#d7d1f0","#ffffff","#ffffff","#ffffff","#a492e2","#e6f0fa","#ffffff"],whale:["Sober","#1e3b43","#e5f4f7","#52aec1","#2d5a6b","#243f4a","#184a5c","#e5f4f7","#3d6b77","#d7e8ea","#d7eaed","#25474e","#f2f9fa","#b3d6dd","#3a96ab","#dff0f4","#b3d6dd","#3a96ab","#f2f9fa","#25474e","#f2f9fa","#dff0f4","#b3d6dd","#e5f4f7","#e5f4f7","#3A96AB","#418FA0","#3A96AB"],hot:["Sober","#8a4f2d","#fff6e9","#e9a264","#c17c60","#a16645","#b04700","#fff6e9","#94785c","#fff6e9","#f5e0c9","#4d2e17","#fff6e9","#e5cba9","#e07a3d","#f2e3d0","#e9ccaa","#e07a3d","#fff6e9","#4d2e17","#fff6e9","#f2e3d0","#e9ccaa","#fff6e9","#fff6e9","#E1B88F","#E1B88F","#E1B88F"],watermelon:["Sober","#2c3e2c","#f5e9e9","#e15b64","#4d7a4d","#3a4d3a","#3e6347","#f5e9e9","#5d6e5d","#f0dede","#e8f0e8","#334433","#f9f5f5","#ddebdd","#e15b64","#d0e6d0","#d0e6d0","#e15b64","#f9f5f5","#334433","#f9f5f5","#d0e6d0","#d0e6d0","#f5e9e9","#f5e9e9","#4D7A4D","#4D7A4D","#4D7A4D"],strawberry:["Sober","#8c2134","#ffffff","#e63553","#ff2e2e","#a0293c","#a82a3e","#ffffff","#b75967","#ffffff","#ffedf0","#000000","#fff9fa","#ffd3d9","#e63553","#ffd1d7","#ffd3d9","#e63553","#ffffff","#000000","#fff9fa","#ffd3d9","#ffd3d9","#ffffff","#ffffff","#E63553","#E63553","#E63553"],coffee:["Sober","#2c1e17","#ffffff","#9b6b4a","#6a412f","#382720","#40291e","#ffffff","#5e4639","#ffffff","#e8e0d8","#000000","#faf5f0","#e1d4c7","#8f5e3c","#f0e8e2","#d9cec4","#8f5e3c","#ffffff","#000000","#faf5f0","#f0e8e2","#d9cec4","#ffffff","#ffffff","#8F5E3C","#8F5E3C","#8F5E3C"],honey:["Sober","#422b0d","#ffffff","#e9a42c","#b07616","#573a13","#6a4615","#ffffff","#7d5c2e","#ffffff","#f8f0db","#000000","#fdf8ea","#e5d6b0","#d89b28","#f5e7c7","#f0e0bc","#d89b28","#ffffff","#000000","#fdf8ea","#f5e7c7","#f0e0bc","#ffffff","#ffffff","#D89B28","#D89B28","#D89B28"],pig:["Sober","#8c3b59","#ffffff","#c07293","#ff8fb6","#a74e6f","#ff8fb6","#000000","#b56581","#ffffff","#ffeef4","#000000","#fff9fb","#ffe0ec","#ff5c99","#ffdbea","#ffc2db","#ff8fb6","#000000","#000000","#fff9fb","#fff2f7","#ffe9f2","#ffffff","#ffffff","#F193B8","#F193B8","#F193B8"],panda:["Sober","#202020","#ffffff","#7ab372","#474747","#2a2a2a","#303030","#ffffff","#7D7D7D","#ffffff","#f2f2f2","#000000","#ffffff","#e5e5e5","#5a9b52","#e3e3e3","#c0c0c0","#5a9b52","#ffffff","#000000","#ffffff","#f7f7f7","#ebebeb","#ffffff","#ffffff","#ffffff","#2A2A2A","#ffffff"],matcha:["Sober","#3a5f3a","#ffffff","#5d9e5d","#4d8b4d","#2e4e2e","#2d5a2d","#ffffff","#737373","#ffffff","#e0e0e0","#333333","#ffffff","#dddddd","#4d8b4d","#efefef","#c8c8c8","#4d8b4d","#ffffff","#000000","#f5f5f5","#e0e0e0","#dddddd","#ffffff","#ffffff","#4d8b4d","#3a5f3a","#5d9e5d"],turtle:["Sober","#0d352a","#ffffff","#2ac1a8","#1a6a5a","#124a3a","#0a4a3a","#ffffff","#4a6a5a","#ffffff","#e0f0ea","#222222","#ffffff","#b8d8d0","#1a9a82","#e8f5f2","#a8e0d0","#1a6a5a","#ffffff","#000000","#e8f5f0","#c8e8e0","#d0f0e8","#ffffff","#ffffff","#1a9a82","#ffffff","#c8f0e0"],island:["Sober","#0369a1","#ffffff","#0ea5e9","#098fce","#003552","#0076ad","#fafaf9","#a8a29e","#ffffff","#f5f5f4","#1c1917","#f8fafc","#d6d3d1","#098fce","#f1f5f9","#e7e5e4","#43a8db","#ffffff","#1c1917","#fafaf9","#e7e5e4","#d6d3d1","#ffffff","#ffffff","#003857","#005075","#005075"]};function V({settings:e,appUtils:t},n){let{createAppTitle:a}=t,o=[e.buttonStyle,e.taskbarBgColor,e.taskbarTextColor,e.taskbarHoverColor,e.taskbarActiveBgColor,e.taskbarInactiveBgColor,e.windowActiveHeaderBgColor,e.windowActiveHeaderTextColor,e.windowInactiveHeaderBgColor,e.windowIninactiveHeaderTextColor,e.windowSidebarBgColor,e.windowTextColor,e.windowContentBgColor,e.windowLineColor,e.appPrimaryColorBg,e.appPrimaryBgColor,e.windowSidebarHoverBgColor,e.windowSidebarSelectedBgColor,e.windowSidebarSelectedTextColor,e.startMenuTextColor,e.startMenuBgColor,e.startMenuActiveBgColor,e.startMenuIconBgColor,e.iconActiveTextColor,e.iconInactiveTextColor,e.iconActiveBgColor,e.iconImageBgColor,e.iconHoverBgColor],f=l`<div>${a("Theming",{})}</div>`;f.dataset.section="theme";let r=l`<div class="w-group"><h3>Theme Presets</h3></div>`;f.appendChild(r),f.appendChild(re(d,l));let c=l`<div class="w-group"><h3>Styling</h3></div>`;c.appendChild(T({ref:e.buttonStyle,options:["Colorful","Sober"],label:"Windows button style"},n)),f.append(c);let u=l`<div class="w-group"><h3>Colors</h3></div>`;return[["Taskbar Background",e.taskbarBgColor],["Taskbar Hover",e.taskbarHoverColor],["Taskbar Text",e.taskbarTextColor],["Taskbar Active App Background",e.taskbarActiveBgColor],["Taskbar Inactive App Background",e.taskbarInactiveBgColor],["Start Menu Background",e.startMenuBgColor],["Start Menu Text",e.startMenuTextColor],["Start Menu Selected Item",e.startMenuActiveBgColor],["Start Menu Icon Background",e.startMenuIconBgColor],["Active Header Background",e.windowActiveHeaderBgColor],["Active Header Text",e.windowActiveHeaderTextColor],["Inactive Header Background",e.windowInactiveHeaderBgColor],["Inactive Header Text",e.windowIninactiveHeaderTextColor],["Regular Text",e.windowTextColor],["Regular Background",e.windowContentBgColor],["Alternative App Color",e.appPrimaryColorBg],["Alternative App Background",e.appPrimaryBgColor],["Application Lines",e.windowLineColor],["Sidebar Background",e.windowSidebarBgColor],["Sidebar Hover Background",e.windowSidebarHoverBgColor],["Sidebar Selected Background",e.windowSidebarSelectedBgColor],["Sidebar Selected Text",e.windowSidebarSelectedTextColor],["Active Icon Text",e.iconActiveTextColor],["Active Icon Background",e.iconActiveBgColor],["Inactive Icon Text",e.iconInactiveTextColor],["Icon Image Background",e.iconImageBgColor],["Icon Hover Background",e.iconHoverBgColor]].forEach(([s,i])=>{u.appendChild(E(i,s,n))}),f.appendChild(u),f;function d(s){if(s)for(let i=0;i<s.length;i++){let p=s[i],b=o[i];p&&b&&b.setValueIfChanged(p)}}}function re(e,t){let n=t`<div>Choose a theme preset</div>`;n.style.marginBottom="10px";let a=t`<div class="w-char-grid"></div>`,o=t`<div class="w-char-picker">
${a}
</div>`;[["\u{1F977}","dark"],["\u{1F31A}","moon"],["\u{1F916}","robot"],["\u{1F30A}","light"],["\u{1F3DD}\uFE0F","island"],["\u{1F975}","hot"],["\u{1F52E}","crystal"],["\u{1F349}","watermelon"],["\u{1F353}","strawberry"],["\u2615","coffee"],["\u{1F375}","matcha"],["\u{1F36F}","honey"],["\u{1F416}","pig"],["\u{1F9A6}","otter"],["\u{1F40B}","whale"],["\u{1F422}","turtle"],["\u{1F43C}","panda"]].forEach(([c,u])=>{let d=document.createElement("span");d.className="w-char-picker-char",d.textContent=c,d.addEventListener("click",s=>{e(ne[u]),s.stopPropagation(),s.preventDefault()}),d.tabIndex="0",d.onkeydown=s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),d.click())},a.appendChild(d)});let r=t`<div />`;return r.appendChild(n),r.appendChild(o),r}function z({appUtils:e,settings:t},n){let{createAppTitle:a}=e,o=l`<div>${a("Window",{})}</div>`;o.dataset.section="window";let f=l`<div class="w-group"><h3>Header style</h3></div>`;f.appendChild(T({ref:t.headerTitlePosition,options:["Left","Right","Center"],label:"Title Position"},n)),f.appendChild(T({ref:t.buttonPosition,options:["Left","Right"],label:"Button Position"},n)),f.appendChild(T({ref:t.buttonStyle,options:["Colorful","Sober"],label:"Button Style"},n)),o.appendChild(f);let r=l`<div class="w-group"><h3>Sizes</h3></div>`;r.appendChild(g({ref:t.windowHeaderHeight,label:"Header's Height",min:30,max:50,valueToText:s=>String(s)+"px"},n)),r.appendChild(g({ref:t.windowButtonSize,label:"Button Size",min:10,max:25,valueToText:s=>String(s)},n)),r.appendChild(g({ref:t.windowBorderSize,label:"Window Border Size (0 to remove borders)",min:0,max:15,valueToText:s=>String(s)},n)),o.appendChild(r);let c=l`<div class="w-group"><h3>Positioning</h3></div>`;c.appendChild(C({ref:t.oobWindows,label:"Windows can partially be moved out of the screen"},n)),c.appendChild(C({ref:t.absoluteWindowPositioning,label:"Absolute Positioning (don't move windows on page resize)"},n)),c.appendChild(C({ref:t.absoluteWindowSize,label:"Absolute size (don't update window size on page resize)"},n)),c.appendChild(C({ref:t.dblClickHeaderFullScreen,label:"Double clicking on header toggles full-screen mode"},n)),o.appendChild(c);let u=l`<div class="w-group"><h3>Snapping</h3></div>`;u.appendChild(C({ref:t.topWindowSnapping,label:"When moving a window to the top of the screen, put it on fullscreen"},n)),u.appendChild(C({ref:t.sideWindowSnapping,label:"When moving a window to a side of the screen, put it on half-screen mode (if there's enough horizontal space)"},n)),o.appendChild(u);let d=l`<div class="w-group"><h3>Colors</h3></div>`;return[["Active Header Background",t.windowActiveHeaderBgColor],["Active Header Text",t.windowActiveHeaderTextColor],["Inactive Header Background",t.windowInactiveHeaderBgColor],["Inactive Header Text",t.windowIninactiveHeaderTextColor]].forEach(([s,i])=>{d.appendChild(E(i,s,n))}),o.appendChild(d),o}function G({settings:e,appUtils:t},n){let{createAppTitle:a}=t,o=l`<div>${a("Applications",{})}</div>`;o.dataset.section="applications";let f=l`<div class="w-group"><h3>Common Settings</h3></div>`;f.appendChild(C({ref:e.aboutMeStart,label:'Launch the "About Me" app on start-up by default'},n)),f.appendChild(T({ref:e.sidebarFormat,options:["auto (default)","Always on top"],label:"Location of the sidebar (in concerned apps)",fromRef:c=>c==="auto"?"auto (default)":"Always on top",toRef:c=>c==="Always on top"?"top":"auto"},n)),f.appendChild(T({ref:e.toolbarFormat,options:["Icons and text (default)","Just icons"],label:"Toolbar format (in concerned apps)",fromRef:c=>c==="icon"?"Just icons":"Icons and text (default)",toRef:c=>c==="Just icons"?"icon":"both"},n)),f.appendChild(C({ref:e.showIframeBlockerHelp,label:"Display i-frame help message when they are not interactive"},n)),o.appendChild(f);let r=l`<div class="w-group"><h3>Colors</h3></div>`;return[["Regular Text",e.windowTextColor],["Regular Background",e.windowContentBgColor],["Alternative App Color",e.appPrimaryColorBg],["Alternative App Background",e.appPrimaryBgColor],["Application Lines",e.windowLineColor],["Sidebar Background",e.windowSidebarBgColor],["Sidebar Hover Background",e.windowSidebarHoverBgColor],["Sidebar Selected Background",e.windowSidebarSelectedBgColor],["Sidebar Selected Text",e.windowSidebarSelectedTextColor]].forEach(([c,u])=>{r.appendChild(E(u,c,n))}),o.appendChild(r),o}function F({filesystem:e,settings:t,appUtils:n},a){let{createAppTitle:o}=n,f=l`<div>${o("Desktop Icons",{})}</div>`;f.dataset.section="icons";let r=l`<div class="w-group"><h3>General Settings</h3></div>`;r.appendChild(C({ref:t.moveAroundIcons,label:"Desktop icons can be moved around from the desktop"},a));let c=document.createElement("button");c.className="btn",c.textContent="Reset",c.onclick=()=>{e.rmFile("/userconfig/desktop.config.json")},r.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">Reset to original desktop icons</span>
  ${c}
</div>`),f.appendChild(r);let u=l`<div class="w-group"><h3>Colors</h3></div>`,d=g({ref:t.iconImageBgOpacity,label:"Image background Opacity",min:0,max:100,valueToText:p=>String(p)+"%"},a);u.appendChild(d);let s=g({ref:t.iconHoverOpacity,label:"Hover background Opacity",min:0,max:100,valueToText:p=>String(p)+"%"},a);u.appendChild(s);let i=g({ref:t.iconActiveOpacity,label:"Active Icon Opacity",min:0,max:100,valueToText:p=>String(p)+"%"},a);return u.appendChild(i),[["Icon Image Background",t.iconImageBgColor],["Icon Hover Background",t.iconHoverBgColor],["Inactive Icon Text",t.iconInactiveTextColor],["Active Icon Background",t.iconActiveBgColor],["Active Icon Text",t.iconActiveTextColor]].forEach(([p,b])=>{u.appendChild(E(b,p,a))}),f.appendChild(u),f}function U({filesystem:e,settings:t,appUtils:n,notificationEmitter:a},o){let{createAppTitle:f}=n,r=l`<div>${f("Storage",{})}</div>`;r.dataset.section="storage";let c=l`<div class="w-group"><h3>User Settings</h3></div>`;c.appendChild(l`<i style="position:relative;font-size:0.95em;top:-8px">${`Note: User settings include only what's configurable in the current "Settings" application.`}</i>`);let u=document.createElement("span");u.textContent=W(q()),c.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">localStorage usage estimate</span>
${u}
</div>`);let d=setInterval(()=>{u.textContent=W(q())},1e3);o.addEventListener("abort",()=>{clearInterval(d)}),c.appendChild(C({ref:t.persistSettings,label:"Persist user settings (in localStorage)"},o));let s=document.createElement("button");s.className="btn",s.textContent="Reset",s.onclick=()=>{t.resetStateToDefault()},c.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">Reset to original settings</span>
  ${s}
</div>`),r.appendChild(c);let i=l`<div class="w-group"><h3>User data</h3></div>`;i.appendChild(l`<i style="position:relative;font-size:0.95em;top:-8px">Note: User data includes application data, data you locally saved, as well as advanced configuration such as desktop icons customization.</i>`);let p=document.createElement("span");p.textContent="Calculating...",i.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">IndexedDB usage estimate</span>
<span>${p}${fe(b)}</span>
</div>`),b();function b(){p.textContent="Calculating...",e.getUsageEstimate().then(h=>{p.textContent=W(h)},h=>{console.error("Impossible to get IndexedDB estimate:",h),p.textContent="Could not produce estimate :/"})}i.appendChild(C({ref:t.performFileSystemCheckAtStartup,label:"Do filesystem integrity check at startup"},o)),i.appendChild(C({ref:t.storeNewDataInIndexedDB,label:"Authorize creation of new files (\u26A0\uFE0F Many features are lost when disabling this)"},o));let k=document.createElement("button");k.className="btn",k.textContent="Format",k.onclick=async()=>{try{await e.format(),a.success("Storage","Storage formatted with success!")}catch(h){a.error("Storage","Failed to format storage: "+h.toString())}b()},i.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">Format IndexedDB storage</span>
  ${k}
</div>`);let v=document.createElement("button");return v.className="btn",v.textContent="Check and repair",v.onclick=async()=>{try{await e.repair(),a.success("Storage","Integrity check done!")}catch(h){a.error("Storage","Failed to check integrity: "+h.toString())}b()},i.appendChild(l`<div class="w-small-opt">
  <span class="w-small-opt-desc">Run integrity checks</span>
  ${v}
</div>`),r.appendChild(i),r}function W(e){let t=["B","KB","MB","GB","TB"],n=0;for(;e>=1e3&&n<t.length-1;)e/=1e3,n++;return Math.round(e*100)/100+" "+t[n]}function fe(e){let t=document.createElement("span");return t.tabIndex="0",t.ariaLabel="Re-check",t.title="Re-check",t.style.cursor="pointer",t.style.marginLeft="5px",t.innerHTML='<svg width="800px" height="800px" viewBox="-1 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-342.000000, -7080.000000)" fill="currentColor"><g transform="translate(56.000000, 160.000000)"><path d="M300.002921,6930.85894 C299.524118,6934.16792 296.32507,6936.61291 292.744585,6935.86392 C290.471022,6935.38792 288.623062,6933.55693 288.145263,6931.29294 C287.32919,6927.42196 290.007276,6923.99998 294.022397,6923.99998 L294.022397,6925.99997 L299.041299,6922.99998 L294.022397,6920 L294.022397,6921.99999 C289.003495,6921.99999 285.16002,6926.48297 286.158782,6931.60494 C286.767072,6934.72392 289.294592,6937.23791 292.425383,6937.8439 C297.170253,6938.7619 301.37007,6935.51592 301.990406,6931.12594 C302.074724,6930.52994 301.591905,6929.99995 300.988633,6929.99995 L300.989637,6929.99995 C300.490758,6929.99995 300.074189,6930.36694 300.002921,6930.85894"></path></g></g></g></svg>',t.children[0].style.height="1em",t.children[0].style.width="1em",t.onclick=e,t}function q(){return Math.max((JSON.stringify(localStorage).length-2)*2,0)}function We(e,t,n){let a={minHorizontalSize:t.CONSTANTS.TASKBAR_MIN_HORIZONTAL_SIZE,maxHorizontalSize:t.CONSTANTS.TASKBAR_MAX_HORIZONTAL_SIZE,minVerticalSize:t.CONSTANTS.TASKBAR_MIN_VERTICAL_SIZE,maxVerticalSize:t.CONSTANTS.TASKBAR_MAX_VERTICAL_SIZE};for(let v of Object.keys(a))a[v]===void 0&&console.error(`Settings app: Impossible to get the taskbar's ${v}. The constant names might have been updated.`);let{settings:o}=t,{constructSidebarElt:f}=t.appUtils,r=[{icon:"\u{1F5BC}\uFE0F",text:"Wallpaper",section:"wallpaper",active:!0},{icon:"\u{1F3A8}",text:"Theming",section:"theme",active:!1},{icon:"\u{1FA9F}",text:"Window",section:"window",active:!1},{icon:o.startMenuPic.getValue(),text:"Taskbar",section:"taskbar",active:!1},{icon:"\u{1F9E9}",text:"Applications",section:"applications",active:!1},{icon:"\u{1F939}",text:"Desktop Icons",section:"icons",active:!1},{icon:"\u{1F4BE}",text:"Storage",section:"storage",active:!1},{icon:"\u{1F4BB}",text:"System",section:"system",active:!1}];b();let c=new AbortController;n.addEventListener("abort",()=>{c.abort()});let{container:u,content:d,sidebar:s}=k(r,p);d.appendChild(O(t,n)),d.scrollTo(0,0);let i=s;return o.startMenuPic.onUpdate(()=>{b(),u.removeChild(i),i=f(r,p),u.insertBefore(i,d)},{clearSignal:n}),{element:u,onActivate(){d.focus({preventScroll:!0})}};function p(v){c.abort(),c=new AbortController,d.innerHTML="";for(let h of r)h.active=h.section===v;switch(v){case"wallpaper":d.appendChild(O(t,c.signal));break;case"theme":d.appendChild(V(t,c.signal));break;case"taskbar":d.appendChild($(t,a,c.signal));break;case"system":d.appendChild(P(t,c.signal));break;case"window":d.appendChild(z(t,c.signal));break;case"applications":d.appendChild(G(t,c.signal));break;case"icons":d.appendChild(F(t,c.signal));break;case"storage":d.appendChild(U(t,c.signal));break}d.scrollTo(0,0),d.focus({preventScroll:!0})}function b(){for(let v of r)v.section==="taskbar"&&(v.icon=o.startMenuPic.getValue())}function k(v,h){let w=l`<div class="w-container" />`,B=l`<div class="w-content"></div>`;B.tabIndex="0";let H=f(v,L=>{h(L)});return w.appendChild(H),w.appendChild(B),{container:w,sidebar:H,content:B}}}export{We as create};
